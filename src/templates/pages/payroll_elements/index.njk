{% extends 'layouts/app.njk' %}
{% import 'macros/links.njk' as links %}
{% from 'macros/breadcrumb.njk' import breadcrumb %}
{% from './_filters_form.njk' import filters_form with context %}

{% set title = 'payroll-elements-title'|trans %}

{% block main %}
<div class="pc-container pc-stack">
    {{ breadcrumb([{ title: 'people-title'|trans }, { title: title }]) }}

    <div class="pc-cluster pc-gap" style="--cluster-justify: space-between; --cluster-align: center">
        <h1 class="pc-m" style="--m: 0">
            {{ title }}
        </h1>

        <a href="https://wiki.fairness.coop/fr/guides/gestion/Salaires-et-fiches-de-paie" class="pc-link-btn" rel="noreferrer" target="_blank">
            {{ 'payroll-elements-wiki'|trans }}
        </a>
    </div>

    <div class="pc-cluster pc-gap" style="--cluster-justify: space-between; --cluster-align: center">
        {{ filters_form() }}

        <a is="pc-blob-link" data-blob-content="{{ csv }}" data-blob-mime-type="application/csv" download="{{ 'payroll-elements-filename'|trans({ date: date|htmlYearMonth }) }}" class="pc-btn">
            {{ 'payroll-elements-download'|trans }}
        </a>
    </div>

    {% table table %}
</div>
{% endblock main %}
